<div class="container mt-4">
  <div class="row">
    <div class="col-md-6">
      <h1>Lista de embalses</h1>
      
      <!-- Display loading spinner while fetching embalses -->
      <div *ngIf="isLoading" class="text-center mb-3">
        <div class="spinner-border text-primary" role="status">
          <span class="sr-only">Loading...</span>
        </div>
        <p>Buscando embalses cercanos...</p>
      </div>

      <!-- Display the list of embalses if available -->
      <div *ngIf="!isLoading && embalses.length > 0">
        <div class="list-group">
          <button *ngFor="let embalse of embalses"
                  class="list-group-item list-group-item-action"
                  (click)="elegirEmbalse(embalse)"
                  [class.active]="embalse === embalseElegido">
            {{ embalse.nombre }}
          </button>
        </div>
      </div>

      <!-- Message when no embalses are found -->
      <div *ngIf="!isLoading && searchPerformed && embalses.length === 0" class="alert alert-info mt-3">
        No se han encontrado embalses cercanos.
      </div>

      <!-- Message to show input validation errors -->
      <div *ngIf="errorMessage" class="alert alert-danger mt-3">
        {{ errorMessage }}
      </div>
    </div>

    <!-- Embalse details section -->
    <div class="col-md-6" *ngIf="embalseElegido">
      <app-embalse [embalse]="embalseElegido"></app-embalse>
    </div>
  </div>

  <!-- Input and search button -->
  <div class="row mt-4">
    <div class="col-md-6">
      <div class="form-group">
        <label for="numKm">Introduce el radio de búsqueda (en km):</label>
        <input type="number" id="numKm" [(ngModel)]="numKm" class="form-control" placeholder="Número de kilómetros">
      </div>

      <!-- Search button -->
      <button class="btn btn-primary mt-2" (click)="getEmbalsesCercanos()">Buscar embalses cercanos</button>
    </div>
  </div>
</div>
